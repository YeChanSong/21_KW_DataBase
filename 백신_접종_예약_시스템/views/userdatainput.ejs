<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko">


<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="X-Xss-Protection" content="1; mode=block" />
    <meta content="yes" name="apple-mobile-web-app-capable" />

    <title>코로나19 예방접종 사전예약 시스템</title>
    <link rel="stylesheet" href="https://ncvr.kdca.go.kr/cobk/css/egovframework/rte/com/font.css" />
    <link rel="stylesheet" href="https://ncvr.kdca.go.kr/cobk/css/egovframework/rte/rsrv/mbl/mobile.css?version=21080912" />
    <link rel="stylesheet" href="https://ncvr.kdca.go.kr/cobk/css/egovframework/rte/com/jquery-ui.css" />
    <script src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/rsrv/mbl/jquery-1.12.4.js"></script>
    <script src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/rsrv/mbl/mobile.js"></script>
    <script src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/com/jquery-ui.js"></script>
    <script type="text/javascript" src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/com/common.js"></script>
    <script src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/rsrv/kdca.js?version=21080912"></script>
    <script src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/com/URLInfo.js"></script>
    
    <script type="text/javascript">
    
	    var url = window.location.href;
		if('0' > 0){
            if('' == 'ERR01'){
                customAlert("사전예약 세션이 종료되었거나 잘못된 경로로 시도하였습니다.");
                setTimeout(function(){
	                window.top.location.replace("http://localhost:3000");
                }, 500);
            }else if('' == 'ERR98'){
            	var message = "예약 등록할 수 있는 인원수는 " + "1"+"명으로 초과하였습니다.\n인증 및 대기열 화면으로 이동하시겠습니까?";
                if( confirm(message) ){
                    window.top.location.replace("http://localhost:3000");
                }
            }
		}
		function cnfmRdrct() {
            if( confirm("예약하기 화면으로 이동하면 인증 및 대기열을 다시 진행하셔야 합니다. 이동하시겠습니까?"))
                window.top.location.replace("http://localhost:3000");
            else return;
        }
     </script>


</head>
<body>

<div id="wrap"> 
<!-- Header -->
	<div class="wrapper">
		<header id="header">
	      <h1><a href="javascript:window.top.location.replace('http://localhost:3000');">질병관리청</a></h1>
	      <nav class="top-menu">
	        <ul>
                <!-- https://relay.kdca.go.kr 뒤에 href주소 추가시 페이지 연결-->
<!-- 	          <li><a href="javascript:customAlert('지금은 사전예약기간이 아닙니다.');">예약하기</a></li> -->
	          <li><a href="/cobk/rsrv/mbl/getVcnRsrvRgst2.do?tokKey=564acffa98d76c65dc5db147da3e65af4df02321e623063fc1c84ca775c8e7a13c706ae8cd2ffc7c2d2c9bf3ac29fa23565ad225c19c599677efb6ff1264f47ac39ea4c9362be8cd69ea48f17b152f8725a21a8af745a99aa2af563f899b0254bce9f2f8180d3a12f837a1d0fe62">예약하기</a></li>
<!--                     <li><a href="javascript:cnfmRdrct();">예약하기</a></li> -->
	          <li><a href="/cobk/rsrv/mbl/getVcnRsrvCnfm.do?tokKey=564acffa98d76c65dc5db147da3e65af4df02321e623063fc1c84ca775c8e7a13c706ae8cd2ffc7c2d2c9bf3ac29fa23565ad225c19c599677efb6ff1264f47ac39ea4c9362be8cd69ea48f17b152f8725a21a8af745a99aa2af563f899b0254bce9f2f8180d3a12f837a1d0fe62">예약 조회/변경/취소</a></li>
	          <li><a href="/cobk/rsrv/mbl/getVcnRsrvMdinLst.do?tokKey=564acffa98d76c65dc5db147da3e65af4df02321e623063fc1c84ca775c8e7a13c706ae8cd2ffc7c2d2c9bf3ac29fa23565ad225c19c599677efb6ff1264f47ac39ea4c9362be8cd69ea48f17b152f8725a21a8af745a99aa2af563f899b0254bce9f2f8180d3a12f837a1d0fe62">의료기관 찾기</a></li>
	          <li><a href="/cobk/rsrv/mbl/getVcnRsrvOnlineCtnt.do?tokKey=564acffa98d76c65dc5db147da3e65af4df02321e623063fc1c84ca775c8e7a13c706ae8cd2ffc7c2d2c9bf3ac29fa23565ad225c19c599677efb6ff1264f47ac39ea4c9362be8cd69ea48f17b152f8725a21a8af745a99aa2af563f899b0254bce9f2f8180d3a12f837a1d0fe62">알림마당</a></li>
	        </ul>
	      </nav>
	      <div class="open-menu">
	        <a href="#menu">menu</a>
	      </div>
	    </header>
    </div><!-- //wrapper -->
	
	<div id="container">
		<div id="contents_wrap">
			<meta name="decorator" content="rsrvMbl.layout">




<!-- <script src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/com/form-validate.js"></script> -->
<script type="text/javascript" src="https://ncvr.kdca.go.kr/cobk/js/egovframework/rte/com/netfunnel.js?ver=210722" charset="UTF-8"></script>

<script>

	$.datepicker.setDefaults($.datepicker.regional['ko']); //한국어 설정

	var mdinListArray = null;
	var apnmHhArr = ["08", "09", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21" ];
	var disabledDays = [];
	var dataArr = [];
	
	// 특정일 선택막기
	function disableAllTheseDays(date) {
	    var m = date.getMonth(), d = date.getDate(), y = date.getFullYear();
	    for (i = 0; i < disabledDays.length; i++) {
	        if($.inArray(y + '-' +(m+1) + '-' + d,disabledDays) != -1) {
	            return [false];
	        }
	    }
	    return [true];
	}
	
	function leadingZeros(n, digits) {
	    var zero = '';
	    n = n.toString();

	    if (n.length < digits) {
	        for (i = 0; i < digits - n.length; i++)
	            zero += '0';
	    }
	    return zero + n;
	}
	
	$(document).ready(function() {
	    
         NetFunnel_Complete();
		
	    $(".selResion").click(function(){
	        $('.find-area').fadeIn(300);
	        $('.find-area').css('z-index', '100');
	        $('.choice-medi').hide();
	        $(".find-medi").hide();
	        /* $('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
	        $('#blind').css({'height' : $('html').prop("scrollHeight")+'px'}); */
	    });

	    $(".selHspl").click(function(){
	        $('.find-area').hide();
	        $(".find-medi").hide();
	        $('.choice-medi').fadeIn(300);
	        $('.choice-medi').css('z-index', '100');
	    });

	    $(".selTime").click(function(){
	        $('.find-area').hide();
	        $('.choice-medi').hide();
	        $(".find-medi").fadeIn(300);
	        $('.find-medi').css('z-index', '100');
	    });
	    
	    $('#layerApnmYmd').datepicker({    // #input 태그 아이디와 동일해야 함. 여러개 구분사용 가능
			dateFormat:"yy-mm-dd",    // 날짜 출력폼 설정
		    prevText: '이전 달',
	        nextText: '다음 달',
	        monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
	        monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
	        dayNames: ['일', '월', '화', '수', '목', '금', '토'],
	        dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
	        dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
	        showMonthAfterYear: true,
	        yearSuffix: '년',
		    minDate: new Date("2021-1-2"),
		    maxDate: new Date("2021-1-1"),
		    beforeShowDay: disableAllTheseDays
		});
		
		$('#dueYmd').datepicker({
            dateFormat:"yy-mm-dd",    // 날짜 출력폼 설정
            prevText: '이전 달',
            nextText: '다음 달',
            monthNames: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            monthNamesShort: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
            dayNames: ['일', '월', '화', '수', '목', '금', '토'],
            dayNamesShort: ['일', '월', '화', '수', '목', '금', '토'],
            dayNamesMin: ['일', '월', '화', '수', '목', '금', '토'],
            showMonthAfterYear: true,
            yearSuffix: '년',
            minDate: new Date()
        });
		
		$("#rsrvKindDtlSel").on("change", function(){
        	var selDtlVal =  $(this).val();
        	if("0" == selDtlVal || "" == selDtlVal){
        		$("#rsrvKindDtl").val("");
        	}else{
	        	$("#rsrvKindDtl").val($("#rsrvKindDtlSel option:selected").text());
        	}
        });
		
		//등록페이지_취소버튼
		$(".homeMsgBtn").on("click", function(){
			$('#calcle02').fadeIn(300);
			$('#calcle02').css('z-index', '100');
			$('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
			$('#blind').css({'height' : $('html').prop("scrollHeight")+'px'});
			
		});
        
		// 예약 중 나갈 시 네이버 로그인 취소
        $(".homeBtn").on("click", function(){
            $.ajax({
				url : "<%=logout%>",
				type : "GET",
				// data : { },
				// dataType : "json",
				success : function(data) {
					alert("로그아웃 성공");
				}
			});
            
            window.top.location.replace("http://localhost:3000");
		});
		
		//임신여부 선택시 출산예정일 출력 여부
        $("input[name=prgnYn]").on("change", function(){
        	if("Y" == $(this).val()){
        		$("#dueYmdTr").show();
        	}else{
        		$("#dueYmdTr").hide();
        		$("#dueYmd").val("");
        	}
        });
        
        /*등록페이지_의료기관 찾기*/
		$('#mdinSearchBtn').click(function(e){
		    e.preventDefault();
		    
		    if("" == $("#cnfmType").val()){
				customAlert("대상자 확인 후 의료기관 찾기를 진행해주세요.");
                $("#ptntRrn2").focus();
				return false;
			}
		    
		    $.ajax({
				url : "/cobk/rsrv/web/getVcnRsrDataAjax.do",
				type : "POST",
				data : {
                			rsrvKind : $("#rsrvKind").val()
                			, ptntRrn1 : $("#ptntRrn1").val()
                			, ptntRrn2 : $("#ptntRrn2").val()
                			, rsrvKindDtlSel : $("#rsrvKindDtlSel option:selected").val()
                		},
				dataType : "json",
				async : true,
				success : function(data) {
					if(null != data && null != data[0] && data.length > 0){
						data = data[0];
						
						var startYmdData = data.startYmd==null?"":data.startYmd;
						var endYmdData = data.endYmd==null?"":data.endYmd;
						
						var rsrvKindVal = $("#rsrvKind").val();
						var nhisYnVal = $("#nhisYn").val();
						
						disabledDays = [];
                        
						var startDayTxt = startYmdData;
                        var endDayTxt = endYmdData;
                        
						if("Q11" == rsrvKindVal || "Q12" == rsrvKindVal){
                        	
                        	var today = new Date();
	            			var todayTxt = today.getFullYear()+'-'+leadingZeros((today.getMonth()+1), 2) +'-' + leadingZeros(today.getDate(), 2);
	            			
	            			if(todayTxt < '2021-11-25'){
	            				startDayTxt = '2021-11-29';
	            			}else if(todayTxt < '2021-12-01'){
	            				startDayTxt = '2021-12-06';
	            			}else if(todayTxt < '2021-12-08'){
	            				startDayTxt = '2021-12-13';
	            			}else if(todayTxt < '2021-12-15'){
	            				startDayTxt = '2021-12-20';
	            			}else if(todayTxt < '2021-12-22'){
	            				startDayTxt = '2021-12-27';
	            			}else if(todayTxt < '2021-12-29'){
	            				startDayTxt = '2022-01-03';
	            			}else{
	            				startDayTxt = '2022-01-06';
	            			}
							
	            			var tmpDay = new Date(startYmdData);
							tmpStartDayTxt = tmpDay.getFullYear()+'-' + leadingZeros((tmpDay.getMonth()+1), 2) + '-' + leadingZeros(tmpDay.getDate(), 2);
							
            				if(startDayTxt < tmpStartDayTxt ){
		           				startDayTxt = tmpStartDayTxt;
	           				}
	            			
                        }else if("R07" == rsrvKindVal || "Q13" == rsrvKindVal){
                        	
            				var tmpDay = new Date(startYmdData);
	                        var today = new Date();
	            			
	            			startDayTxt = tmpDay.getFullYear()+'-'+leadingZeros((tmpDay.getMonth()+1), 2) +'-' + leadingZeros(tmpDay.getDate(), 2);
	            			
	            			today.setDate(today.getDate()+14);
	            			var todayAdd14Txt = today.getFullYear()+'-'+leadingZeros((today.getMonth()+1), 2) +'-' + leadingZeros(today.getDate(), 2);
	            			
           					if(startDayTxt < todayAdd14Txt ){
	           					startDayTxt = todayAdd14Txt;
           					}
	            			
                        }else if("Q14" == rsrvKindVal){
                        	
            				var tmpDay = new Date(startYmdData);
	                        var today = new Date();
	            			
	            			startDayTxt = tmpDay.getFullYear()+'-'+leadingZeros((tmpDay.getMonth()+1), 2) +'-' + leadingZeros(tmpDay.getDate(), 2);
	            			
	            			today.setDate(today.getDate()+14);
	            			var todayAdd14Txt = today.getFullYear()+'-'+leadingZeros((today.getMonth()+1), 2) +'-' + leadingZeros(today.getDate(), 2);
	            			
           					if(startDayTxt < todayAdd14Txt ){
	           					startDayTxt = todayAdd14Txt;
           					}
	            			
                        }
                        
           				
						$( "#layerApnmYmd" ).datepicker( "option", "minDate", new Date(startDayTxt) );
						$( "#layerApnmYmd" ).datepicker( "option", "maxDate", new Date(endDayTxt) );
						
						$("#sidocd").val("").prop("selected", true);
						$("#layerApnmYmd").val("");
						$("#sggcd").html("<option value=''>시군구</option>");
						$("#emdcd").html("<option value=''>읍면동</option>");
						$("#mdinListDiv").html("");
						$("#mdinViewDiv").html("");
						
					    $('.find-area').fadeIn(300);
					    $('.find-area').css('z-index', '100');
						$('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
						$('#blind').css({'height' : $('html').prop("scrollHeight")+'px'});
					}else{
						customAlert("의료기관 조회 중 오류가 발생하였습니다.");
						return;
					}
				}, error : function(){
					customAlert("의료기관 조회 중 오류가 발생하였습니다.");
					return;
				}
			});
		    
		});//레이어 띄우기_js로 이동
        
        $("#tgtSearchBtn").on("click" , function() {    
        	if("1" != $(":input:radio[name=pprlrCd]:checked").val()){    
	            if("" == $("#apnmNm").val()){
	                customAlert("대리 예약자 이름을 입력해 주세요.");
	                $("#apnmNm").focus();
	                return;
	            }else if(!chkPatten(document.getElementById("apnmNm"), 'regHangulEng', '대리 예약자 이름은 ')){
	                return;
	            }else if("" == $("#apnmRrn1").val()){
	                customAlert("대리 예약자 주민등록번호 앞자리를 입력해 주세요.");
	                $("#apnmRrn1").focus();
	                return;
	            }else if("" == $("#apnmRrn2").val()){
	                customAlert("대리 예약자 주민등록번호 뒷자리를 입력해 주세요.");
	                $("#apnmRrn2").focus();
	                return;
	            }else if(!chkPatten(document.getElementById("apnmRrn1"), 'regCustNo1')){
	                return;
	            }else if(!chkPatten(document.getElementById("apnmRrn2"), 'regCustNo2')){
	                return;
	            }
            }
        	
        	if("" == $("#patnam").val()){
                customAlert("접종받는 분 이름을 입력해 주세요.");
                $("#patnam").focus();
                return;
            }else if(!chkPatten(document.getElementById("patnam"), 'regHangulEng', '접종받는 분 이름은 ')){
                return;
            }else if("" == $("#ptntRrn1").val()){
                customAlert("접종받는 분 주민등록번호 앞자리를 입력해 주세요.");
                $("#ptntRrn1").focus();
                return;
            }else if("" == $("#ptntRrn2").val()){
                customAlert("접종받는 분 주민등록번호 뒷자리를 입력해 주세요.");
                $("#ptntRrn2").focus();
                return;
            }else if(!chkPatten(document.getElementById("ptntRrn1"), 'regCustNo1')){
                return;
            }else if(!chkPatten(document.getElementById("ptntRrn2"), 'regCustNo2')){
                return;
            }
            
            $.ajax({
                url : "/cobk/rsrv/web/getVcnRsrIncltnCnfmAjax2.do",
                type : "POST",
                data : {
                	patnam : $("#patnam").val()
                    , pprlrCd : $(":input:radio[name=pprlrCd]:checked").val()
                    , ptntRrn1 : $("#ptntRrn1").val()
                    , ptntRrn2 : $("#ptntRrn2").val()
                    , selfCrtfInfmCiEnc : $("#selfCrtfInfmCiEnc").val()
                },
                dataType : "json",
                async : true,
                success : function(data) {
                    if(null != data && null != data[0] && data.length > 0){
                        data = data[0];
                        dataArr = data;
                        dataArr.gubun = '5'; //간편예약 더미값
                        
                        var msg = data.msg
                        
                        if (msg === "ERR01"){
                            customAlert("본인인증정보와 접수자정보가 일치하지 않습니다.");
                            //console.log("naverCI : "+$("#selfCrtfInfmCi").val());
                            //console.log("receptCI : "+ data.selfCrtfInfmCi);
                            return;
                        }
                        
                        var ciData = data.selfCrtfInfmCi;
                        var diData = data.selfCrtfInfmDi;
                        var rsrvKindData = data.rsrvKind;
                        var rsrvKindDtlData = data.rsrvKindDtl;
                        var rsrvInYnData = data.rsrvInYn;
                        var vcntmeData = data.vcntme;
                        var nhisYnData = data.nhisYn;
                        var nhisPassYnData = data.nhisPassYn;
                        var timeYnData = data.timeYn;
                        var uprOrgcdData = data.uprOrgcd;
                        var patnamData = data.patnam;
                        var vacMkrCdData = data.vacMkrCd;
                        var rsrvTypeData = data.rsrvType;
                        var cdNmData = data.cdNm;
                        
                        //50세~54세 오픈 수정
                        
                        if("N" == timeYnData){  //사업기간X
                            var dataType = timeYnData=="N"?'1':(nhisYnData=="N"?'2':'0');
                            customAlert("해당기간 내에 대상자가 아닙니다.");
                            console.log("dataType13 : " + dataType);
                            return;
                        }else if("N" == rsrvInYnData){  //이미 예약 완료
                            customAlert("이미 예약이 완료된 대상자 입니다.");
                            return;
                        }else if(vcntmeData != 0  && vcntmeData != 3){  //접종 완료 
                            customAlert("이미 코로나19 예방접종내역이 존재하는 대상자입니다.");
                            return;
                        }
                        
                        if("BT01" == rsrvKindData && "얀센백신 접종자" == rsrvKindDtlData){
                        	customAlert("얀센백신 접종자, 화이자(추가접종)는 대국민 예약이 불가합니다.\n접종센터, 의료기관, 보건소로만 예약이 가능합니다.");
                        	return;
                        }
                            
                        if(null != patnamData && "" != patnamData && $("#patnam").val() != patnamData){
                            var nameChkMsg = "현재 시스템에는 이름이 '" + patnamData + "'(으)로 등록되어있어 입력한 이름과 상이합니다.<br/>" 
                            + "주민등록번호가 올바른지 다시 한번 확인하시고, 올바르다면 진행하실 이름을 선택해주세요.<br/>" 
                            + "'확인'을 선택하면 '" + patnamData + "'(으)로 변경되고,<br/>"
                            + "'취소'를 선택하면 '" + $("#patnam").val() + "'(으)로 변경됩니다.";
                            
                            $("#nameMsgDiv").html(nameChkMsg);
                            
                            $('#calcle03').fadeIn(300);
                            $('#calcle03').css('z-index', '100');
                            $('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
                            $('#blind').css({'height' : $('html').prop("scrollHeight")+'px'});
                            
                        }else{
                            fncIncltnCnfmChk();
                        }
                            
                    }else{
                        customAlert("해당기간 내에 대상자가 아닙니다.");
                        return;
                    }
                }, error : function(){
                    customAlert("대상자 조회 및 본인인증 중 오류가 발생하였습니다.");
                    return;
                }
            });
        });
        
		//등록페이지_예약등록 버튼(메시지 레이어)
		$("#insertVcnRsrvMsgBtn").on("click" , function() {
			
			//등록페이지_예약 벨리데이션
			if (!fncValidation("2")) {
				return;
			}
			
			$('#calcle01').fadeIn(300);
			$('#calcle01').css('z-index', '100');
			$('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
			$('#blind').css({'height' : $('html').prop("scrollHeight")+'px'});
		});
		
		//등록페이지_예약등록 버튼
		$("#insertVcnRsrvBtn").on("click" , function() {
			
			//본인예약(접종자==예약자)
            if("1" == $(":input:radio[name=pprlrCd]:checked").val()){    
                $("#apnmNm").val($("#patnam").val());
                $("#apnmRrn1").val($("#ptntRrn1").val());
                $("#apnmRrn2").val($("#ptntRrn2").val());
            }
			
			$.ajax({
				url : "/cobk/rsrv/web/setVcnRsrvAjax2.do",
				type : "POST",
				data : $("#vcnRsrvFrm").serializeArray(),
				dataType : "json",
				success : function(data) {
					var data = data[0];
					
					if("" == data.msg || null == data.msg){
						var apnmNo = data.apnmNo;

						$("#apnmNo").val(apnmNo);
						$("#vcnRsrvFrm").attr("action", "/cobk/rsrv/mbl/getVcnRsrvRgstCnfm.do?tokKey=564acffa98d76c65dc5db147da3e65af4df02321e623063fc1c84ca775c8e7a13c706ae8cd2ffc7c2d2c9bf3ac29fa23565ad225c19c599677efb6ff1264f47ac39ea4c9362be8cd69ea48f17b152f8725a21a8af745a99aa2af563f899b0254bce9f2f8180d3a12f837a1d0fe62");
			 			$("#vcnRsrvFrm").submit();
					}else{
						if(data.msg == "ERR01"){
							customAlert("사전예약 세션이 종료되었거나 잘못된 경로로 시도하였습니다.");
							window.top.location.replace("http://localhost:3000");
							return;						
						}else if(data.msg == "ERR02"){ // 본인인증CI != 접수화면 KeyIn된 정보의CI가 다를경우
                            confirm("본인인증한 정보와 최종 접수자 정보가 일치하지 않습니다.");
                            //customAlert("본인인증한 정보와 최종 접수자 정보가 일치하지 않습니다.");
                            window.top.location.replace("http://localhost:3000");
                            return;
                        }else{
							customAlert(data.msg);
							return;
						}
					}
				}, error: function(e){
					customAlert("예약 등록 중 오류가 발생하였습니다.");
				}
			});
		});
		



		//등록페이지_예약 벨리데이션
		function fncValidation(num){
			
			if("1" != $(":input:radio[name=pprlrCd]:checked").val()){  
	            if("" == $("#apnmNm").val()){
	                customAlert("대리 예약자 이름을 입력해 주세요.");
	                $("#apnmNm").focus();
	                return false;
	            }else if(!chkPatten(document.getElementById("apnmNm"), 'regHangulEng', '대리 예약자 이름은 ')){
	                return false;
	            }else if("" == $("#apnmRrn1").val()){
	                customAlert("대리 예약자 주민등록번호 앞자리를 입력해 주세요.");
	                $("#apnmRrn1").focus();
	                return false;
	            }else if("" == $("#apnmRrn2").val()){
	                customAlert("대리 예약자 주민등록번호 뒷자리를 입력해 주세요.");
	                $("#apnmRrn2").focus();
	                return false;
	            }else if(!chkPatten(document.getElementById("apnmRrn1"), 'regCustNo1')){
	                return false;
	            }else if(!chkPatten(document.getElementById("apnmRrn2"), 'regCustNo2')){
	                return false;
	            }
            }
			
			if("" == $("#patnam").val()){
                customAlert("접종받는 분 이름을 입력해 주세요.");
                $("#patnam").focus();
                return false;
            }else if(!chkPatten(document.getElementById("patnam"), 'regHangulEng', '접종받는 분 이름은 ')){
                return false;
            }else if("" == $("#ptntRrn1").val()){
                customAlert("접종받는 분 주민등록번호 앞자리를 입력해 주세요.");
                $("#ptntRrn1").focus();
                return false;
            }else if("" == $("#ptntRrn2").val()){
                customAlert("접종받는 분 주민등록번호 뒷자리를 입력해 주세요.");
                $("#ptntRrn2").focus();
                return false;
            }else if(!chkPatten(document.getElementById("ptntRrn1"), 'regCustNo1')){
                return false;
            }else if(!chkPatten(document.getElementById("ptntRrn2"), 'regCustNo2')){
                return false;
            }else if("" == $("#cnfmType").val()){
                customAlert("대상자 확인 후 진행해주세요.");
                $("#ptntRrn2").focus();
                return false;
            }else if("R07" == $("#rsrvKind").val() && "N" == $("input[name=prgnYn]:checked").val()){
            	customAlert("임신 중인 대상자만 예약이 가능합니다.");
                $("#prgnYn2").focus();
                return false;
            }else if("R07" == $("#rsrvKind").val() && "Y" == $("input[name=prgnYn]:checked").val() && "" == $("#dueYmd").val()){
            	customAlert("출산예정일을 입력해 주세요.");
                $("#dueYmd").focus();
                return false;
                
            }else if("Q13" == $("#rsrvKind").val() && "N" == $("input[name=prgnYn]:checked").val()){
            	customAlert("임신 중인 대상자만 예약이 가능합니다.");
                $("#prgnYn2").focus();
                return false;
            }else if("Q13" == $("#rsrvKind").val() && "Y" == $("input[name=prgnYn]:checked").val() && "" == $("#dueYmd").val()){
            	customAlert("출산예정일을 입력해 주세요.");
                $("#dueYmd").focus();
                return false;
            }else if("Q14" == $("#rsrvKind").val() && "Y" == $("input[name=prgnYn]:checked").val() && "" == $("#dueYmd").val()){
            	customAlert("임신 중이시면 출산예정일을 입력해 주세요.");
                $("#dueYmd").focus();
                return false;
                
            }else if("BT01" == $("#rsrvKind").val() && "" == $("#rsrvKindDtl").val() && "0" == $("#rsrvKindDtlSel option:selected").val()){
            	customAlert("예약대상자 구분을 선택해 주세요.");
                $("#rsrvKindDtlSel").focus();
                return false;   
            }else if("BT02" == $("#rsrvKind").val() && "" == $("#rsrvKindDtl").val() && "0" == $("#rsrvKindDtlSel option:selected").val()){
            	customAlert("예약대상자 구분을 선택해 주세요.");
                $("#rsrvKindDtlSel").focus();
                return false;   
                
        	}else if("" == $("#apnmMtnoTofmn").val()){
                customAlert("휴대폰번호 앞자리를 입력해 주세요.");
                $("#apnmMtnoTofmn").focus();
                return false;
            }else if("" == $("#apnmMtno1").val()){
                customAlert("휴대폰번호 중간자리를 입력해 주세요.");
                $("#apnmMtno1").focus();
                return false;
            }else if("" == $("#apnmMtno2").val()){
                customAlert("휴대폰번호 뒷자리를 입력해 주세요.");
                $("#apnmMtno2").focus();
                return false;
            }else if(!chkPatten(document.getElementById("apnmMtnoTofmn"), 'regHdPhone1')){
                return false;
            }else if(!chkPatten(document.getElementById("apnmMtno1"), 'regHdPhone2')){
                return false;
            }else if(!chkPatten(document.getElementById("apnmMtno2"), 'regHdPhone3')){
                return false;
            }else if(!$('input:radio[name=smsRcptAgrmYn]').is(':checked')){
                customAlert("국민비서 알림 수신받을 방법을 선택해 주세요.");
                $("#smsRcptAgrmYn1").focus();
                return false;
            }
			
			if("2" == num){
				if("" == $("#orgcd").val() || "" == $("#apnmYmd").val() || "" == $("#apnmHh").val()){
					customAlert("의료기관 및 예약일시를 선택해 주세요.");
					$("#mdinSearchBtn").focus();
					return false;
				}
			}
			
			return true;
		}





		// 예약정보 작성여부 확인
		function myValidation(str){
			
			if(str == "Next"){
				if("6" == $(":input:radio[name=pprlrCd]:checked").val()){
	            	if("" == $("#apnmNm").val()){
	                	alert("대리 예약자 이름을 입력해 주세요.");
	                	$("#apnmNm").focus();
	                	return false;
	            	}else if("" == $("#apnmRrn1").val()){
	                	alert("대리 예약자 주민등록번호 앞자리를 입력해 주세요.");
	                	$("#apnmRrn1").focus();
	                	return false;
	            	}else if("" == $("#apnmRrn2").val()){
	                	alert("대리 예약자 주민등록번호 뒷자리를 입력해 주세요.");
	                	$("#apnmRrn2").focus();
	               		return false;
	            	}
            	}
				if("" == $("#patnam").val()){
                	alert("접종받는 분 이름을 입력해 주세요.");
                	$("#patnam").focus();
                	return false;
            	}else if("" == $("#ptntRrn1").val()){
                	alert("접종받는 분 주민등록번호 앞자리를 입력해 주세요.");
                	$("#ptntRrn1").focus();
                	return false;
            	}else if("" == $("#ptntRrn2").val()){
                	alert("접종받는 분 주민등록번호 뒷자리를 입력해 주세요.");
                	$("#ptntRrn2").focus();
                	return false;
            	}else if("" == $("#apnmMtno1").val()){
                	alert("휴대폰번호 중간자리를 입력해 주세요.");
                	$("#apnmMtno1").focus();
                	return false;
            	}else if("" == $("#apnmMtno2").val()){
                	alert("휴대폰번호 뒷자리를 입력해 주세요.");
                	$("#apnmMtno2").focus();
                	return false;
            	}
				return true;
			}
		}


		
		//다음으로 버튼
		$("#searchMc").click(function(e){
			//조건 확인
			if(!myValidation("Next")){
				return;
			}
			
			// $("#rsrvRgstPage").hide();         //예방접종예약하기_본인인증페이지(현재)
			// $("#rsrvRgstSearchMcPage").show(); //의료기관 찾기 레이어
			// window.scrollTo(0, 0);
			alert("myVal 성공");

			// 사용자가 등록한 정보를 폼데이터로 보내고 페이지 이동해야함.
			window.top.location.replace("http://localhost:3000");

		});
		
		//뒤로버튼
		$("#backRsrvRgst").click(function(e){
			$("#rsrvRgstPage").show(); 		    //예방접종예약하기_본인인증페이지(현재)
			$("#rsrvRgstSearchMcPage").hide();  //의료기관 찾기 레이어
		});
		
		//레이어_의료기관 찾기의 의료기관 찾기 버튼
		$("#choice-medi").on("click", function() {
			//검색조건 확인
			if (!fncLayerValidation()) {
				return;
			}else{
			    $("#blind").remove();
			    $('.find-area').hide();
			    $('.choice-medi').fadeIn(300);
			    $('.choice-medi').css('z-index', '100');
			    $('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
			    $('#blind').css({'height' : $('html').prop("scrollHeight")+'px'});
			}
			
			$.ajax({
				url : "/cobk/rsrv/web/getVcnRsrvApnmMdinLstAjax.do",
				type : "POST",
				data : {
					apnmYmd : $("#layerApnmYmd").val().replace(/-/gi, "")
					, rsrvKind : $("#rsrvKind").val()
					, sidocd : $("#sidocd option:selected").val()
					, sggcd : $("#sggcd option:selected").val()
					, emdcd : $("#emdcd option:selected").val()
					, orgnm : $("#orgnmTxt").val()
					, nhisYn : $("#nhisYn").val()
					, nhisPassYn : $("#nhisPassYn").val()
					, uprOrgcd : $("#uprOrgcd").val()
					, vacMkrCd : $("#vacMkrCd").val()
					, rsrvType : $("#rsrvType").val()
				},
				dataType : "json",
				success : function(data) {
					if(data.length > 0){
						mdinListArray = data;	//의료기관 스크립트 mdinListArray 변수에 저장
						var mdinListDivHtml = "";
						$.each(data, function(index, item){
							var orgcd = "";
 							//(의사1인당 하루 100명 초과 or 업무시간 X >>> class에 disabled 추가)
/*  							var apnmCntFlg = item.apnmCnt=="0"?"disabled":""; */
 							var apnmCntFlg = item.rsdyYn == "Y"?"disabled":(item.apnmCnt=="0"?"disabled":(item.rsrvCanYn=="N"?"disabled":""));
							mdinListDivHtml += '<div class="list-view '+ apnmCntFlg +'" id="listView' + index + '">';
							mdinListDivHtml += '	<a href="javascript:fnc_mdinView(' + index + ', \'' + item.orgcd + '\', ' + $("#layerApnmYmd").val().replace(/-/gi, "") +')">';
							mdinListDivHtml += '		<p>' + $("#sidocd option:selected").html() + ' &gt; ' + $("#sggcd option:selected").html() + '</p>';
							mdinListDivHtml += '		<h5>'+item.orgnm + (apnmCntFlg=="disabled"?' (예약불가)':'') + '</h5>';
							mdinListDivHtml += '	</a>';
							mdinListDivHtml += '</div>';
					    });
						
						$("#listCnt").html("검색결과 총 " + data.length + "개");
						$("#mdinListDiv").html(mdinListDivHtml); 				//조회된 병원 리스트
						$("#mdinSelDiv").show();
					}else{
						$("#mdinSelDiv").hide();
						$("#listCnt").html("검색결과 총 0개");
						$("#mdinListDiv").html("<h4>검색된 의료기관이 없습니다.</h4>"); ////조회된 병원 리스트
					}
					
					$("#searchCtnt").html('<ul class="clearfix"><li>' + $("#sidocd option:selected").html() +  '</li><li>' + $("#sggcd option:selected").html() + '</li><li>' + $("#emdcd option:selected").html()  + '</li></ul>');
				}
			});
		});
		
		
		//레이어_선택 버튼
		$("#mdinSelBtn").on("click" , function() {
			
			var layerOrgcd = $("#layerOrgcd").val();
			var layerOrgnm = $("#layerOrgnm").val();
			var layerApnmYmd = $("#layerApnmYmd").val();
			var layerApnmHhTy = $("#layerApnmHhTy").val();
			if("" == layerApnmYmd ){
				customAlert("예약 일자를 선택하세요.");
				$("#layerApnmYmd").focus();
				return false;
			}else if("" == $("#sidocd").val()){
				customAlert("광역시도를 선택하세요.");
				$("#sidocd").focus();
				return false;
			}else if("" == $("#sggcd").val()){
				customAlert("시군구를 선택하세요.");
				$("#sggcd").focus();
				return false;
			}else if("" == $("#layerOrgcd").val()){
				customAlert("예약 기관이 선택되지 않았습니다.");
				return false;
			}else if("" == layerApnmHhTy){
				customAlert("예약 시간이 선택되지 않았습니다.");
				return false;
			}else{
				
				$("#orgcd").val(layerOrgcd);
				$("#orgnm").val(layerOrgnm);
				$("#apnmYmd").val(layerApnmYmd);
				$("#apnmHh").val(apnmHhArr[layerApnmHhTy-1]);
				$("#apnmDiv").html("<ul><li>예약일시 : " + layerApnmYmd + " " + apnmHhArr[layerApnmHhTy-1] + ":00</li> <li>선택된 의료기관 : " + layerOrgnm + "</li></ul>");
				$("#blind").remove();
				$('.layer-find').hide();
				
			}
		});
		
		//레이어_시도 변경
		$("#sidocd").on("change", function() {
			$("#sggcd").html("<option value=''>시군구</option>");
			$("#emdcd").html("<option value=''>읍면동</option>");
			
			var sidocdVal = $("#sidocd option:selected").val();
			if(null == sidocdVal || "" == sidocdVal){
				return;
			}
			
			$.ajax({
				url : "/cobk/rsrv/web/getDitordLstAjax.do",
				type : "POST",
				data : { SIDCOD : sidocdVal },
				dataType : "json",
				success : function(data) {
					var sggcdHtml = "<option value=''>시군구</option>";
					if(data.length > 0){
						$.each(data, function(index, item){
							sggcdHtml += "<option value='" + item.ditord + "'>" + item.sidditnam + "</option>"
						});
					}
					$("#sggcd").html(sggcdHtml);
						
				}
			});
		});
		
		//레이어_시군구 변경
		$("#sggcd").on("change", function() {
			$("#emdcd").html("<option value=''>읍면동</option>");
			
			var sggcdVal = $("#sggcd option:selected").val();
			if(null == sggcdVal || "" == sggcdVal){
				return;
			}
			
			$.ajax({
				url : "/cobk/rsrv/web/getDongLstAjax.do",
				type : "POST",
				data : { DITORD : sggcdVal },
				dataType : "json",
				success : function(data) {
					var emdcdHtml = "<option value=''>읍면동</option>";
					if(data.length > 0){
						$.each(data, function(index, item){
							emdcdHtml += "<option value='" + item.dongnm + "'>" + item.dongnm + "</option>"
						});
					}
					$("#emdcd").html(emdcdHtml);
						
				}
			});
		});
		
		$(".korean").keyup(function (event) {
			regexp = /(?:[0-9]|[^\w\s\uAC00-\uD7A3\u3131-\u314E\u314F-\u3163\u318D\u119E\u11A2\u2022\u2025a\u00B7\uFE55]|_)+/g
            v = $(this).val();
            if (regexp.test(v)) {
                $(this).val(v.replace(regexp, ''));
            }
            
            if(getByteLength( v ) > 80 ){
            	customAlert("입력 가능한 글자수를 초과하였습니다.");
            	$(this).val( cutByteLength( v, 80 ) );
            }

        });
        
      //이름변경X 예약
		$("#nameNoChgBtn").on("click", function() {
			fncIncltnCnfmChk();
		});
		//이름변경O 예약
		$("#nameChgBtn").on("click", function() {
			$("#patnam").val(dataArr.patnam);
			fncIncltnCnfmChk();
		});
		
      	//등록페이지_본인/대리 예약 구분
		$(":input:radio[name=pprlrCd]").on("change", function(){
// 	        $("#pprlrCd option").eq(0).prop("selected", true);
			
			if("1" == $(this).val()){
				$("#selfRsrvTr1").hide();
				$("#selfRsrvTr2").hide();
			}else{
				
				$("#selfRsrvTr1").show();
				$("#selfRsrvTr2").show();
			}
			
		});
		
	});
	
	//레이어_의료기관 벨리데이션
	function fncLayerValidation(){
		var layerOrgcd = $("#layerOrgcd").val();
		var layerOrgnm = $("#layerOrgnm").val();
		var layerApnmYmd = $("#layerApnmYmd").val();
		var layerApnmHhTy = $("#layerApnmHhTy").val();
	
		if("" ==  $("#layerApnmYmd").val() ){
			customAlert("예약 날짜를 선택하세요.");
			return false;
		}else if("" == $("#sidocd").val()){
			customAlert("광역시도를 선택해 주세요");
			$("#sidocd").focus();
			return false;
		}else if("" == $("#sggcd").val()){
			customAlert("시군구를 선택해 주세요");
			$("#sggcd").focus();
			return false;
		}
		return true;
	}
	
	function fncIncltnCnfmChk(){
		var gubun = dataArr.gubun;
		var ciData = dataArr.selfCrtfInfmCi;
		var rsrvKindData = dataArr.rsrvKind;
		var rsrvKindDtlData =dataArr.rsrvKindDtl;
		var rsrvInYnData = dataArr.rsrvInYn;
		var vcntmeData = dataArr.vcntme;
		var nhisYnData = dataArr.nhisYn;
		var nhisPassYnData = dataArr.nhisPassYn;
		var timeYnData = dataArr.timeYn;
		var uprOrgcdData = dataArr.uprOrgcd;
		var patnamData = dataArr.patnam;
		var vacMkrCdData = dataArr.vacMkrCd;
		var rsrvTypeData = dataArr.rsrvType;
		var cdNmData = dataArr.cdNm;
		
		var ptntRrn2 = $("#ptntRrn2").val();
        var tmpPtntRrn2 = ptntRrn2.substr(0,1);
        
		if("R07" == rsrvKindData || "Q13" == rsrvKindData || ("Q14" == rsrvKindData && ("0" == tmpPtntRrn2 || "2" == tmpPtntRrn2 || "4" == tmpPtntRrn2 || "6" == tmpPtntRrn2 || "8" == tmpPtntRrn2)) ){	//임신부 대상자일 경우
        	$("#prgnYnTr").show();
        }
        
		//본인 인증 실행
		/* if("1"== gubun){	//휴대폰 본인인증
			if(null == ciData || "" == ciData){
				customAlert("금융인증서 또는 PC 공동인증서를 이용하여 본인인증이 가능한 대상자입니다.");
				return;
			}
			fnc_certSubmit();
		}else if("2"== gubun){	//아이핀 본인인증
			if(null == ciData || "" == ciData){
				customAlert("금융인증서 또는 PC 공동인증서를 이용하여 본인인증이 가능한 대상자입니다.");
				return;
			}
			fnc_ipinSubmit();
		}else if("3"== gubun){	//공동인증서 본인인증
			ufn_mbl_setSign();
		} */
		
		$("#vcntme").val(vcntmeData);
		$("#vacMkrCd").val(vacMkrCdData);
		$("#rsrvType").val(rsrvTypeData);
		$("#nhisYn").val(nhisYnData);
		$("#nhisPassYn").val(nhisPassYnData);
		$("#uprOrgcd").val(uprOrgcdData);
		$("#rsrvKind").val(rsrvKindData);
		
		
		var vcnMsgTxt = "";
		
		if("VEN00013" == vacMkrCdData){
			if("BT01" == rsrvKindData){
            	vcnMsgTxt = "mRNA(모더나 또는 화이자)백신";
        	}else{
				vcnMsgTxt = "화이자 백신 대상자";
        	}
		}else if("VEN00014" == vacMkrCdData){
			if("R07" == rsrvKindData){
            	vcnMsgTxt = "mRNA(모더나 또는 화이자)백신";
        	}else{
				vcnMsgTxt = "모더나 백신 대상자";
        	}
		}else if("VEN00015" == vacMkrCdData){
			vcnMsgTxt = "아스트라제네카 백신 대상자";
		}else if("VEN00016" == vacMkrCdData){
			vcnMsgTxt = "얀센 백신 대상자";
		}
		
		$("#vcnMsg").html(vcnMsgTxt);
		
       	if(("BT01" == rsrvKindData || "BT02" == rsrvKindData) && (null == rsrvKindDtlData || "" == rsrvKindDtlData)){
        	$("#rsrvKindMsg").html("");
        	$("#rsrvKindDtlSel").show();
        	$("#rsrvKindDtlUl").show();
        }else{
        	$("#rsrvKindMsg").html(cdNmData);
            $("#rsrvKindDtl").val(rsrvKindDtlData);
        }
		
		//대상자 확인 성공시 readOnly처리 및 버튼 숨기기
        $("#cnfmType").val("checked");
        $("#apnmNm").prop('readonly', true);
        $("#apnmRrn1").prop('readonly', true);
        $("#apnmRrn2").prop('readonly', true);
        
        $(":input:radio[name=pprlrCd]").not(":checked").attr("disabled", "disabled");
        $("#patnam").prop("readonly", true);
		$("#ptntRrn1").prop("readonly", true);
		$("#ptntRrn2").prop("readonly", true);
        $("#tgtSearchBtn").hide();
	}
	
	
	//레이어_의료기관 상세조회
	function fnc_mdinView(index, orgcd, apnmYmd){
		$("#mdinViewDiv").html("");
		$("#layerOrgnm").val("");
		$("#layerApnmHhTy").val("");
		//var mdinNam = mdinListArray[index].PATNUM;
		var liIndex = 0;
		var vacMkrCd = $("#vacMkrCd").val();
		var rsrvType = $("#rsrvType").val();
		var rsrvKind = $("#rsrvKind").val();
		
		$.ajax({
			url : "/cobk/rsrv/web/getVcnRsrvMdinTimeInfoAjax.do",
			type : "POST",
			data : {orgcd : orgcd,  apnmYmd : apnmYmd, rsrvKind : rsrvKind, vacMkrCd : vacMkrCd, rsrvType : rsrvType },
			dataType : "json",
			async : true,
			success : function(data) {
				
				var mdinTimeData = data[0].selectMdinTimeInfo==null?data:data[0].selectMdinTimeInfo;
				var orgCvntlInfoData = data.selectOrgCvntlInfo;
				
				$('#layerOrgcd').val(mdinListArray[index].orgcd);
				$('#layerOrgnm').val(mdinListArray[index].orgnm);

				var mdinViewDivHtml = "";
				
				mdinViewDivHtml += '<div class="wrap-scroll">';
				mdinViewDivHtml += '	<h5>' + mdinListArray[index].orgnm + '</h5>';
				mdinViewDivHtml += '	<div class="view-addr">';
				mdinViewDivHtml += '		<a href="https://m.map.naver.com/search2/search.naver?query='+mdinListArray[index].orgZipaddr+'" target="_blank" title="새창열기">'+ mdinListArray[index].orgZipaddr +'</a>';
				mdinViewDivHtml += '		<a href="javascript:fnc_addrCopy(\'' + mdinListArray[index].orgZipaddr + '\');"><span class="copy-addr">복사</span></a>';
				mdinViewDivHtml += '	</div>';
				if(0 == mdinTimeData.length || (null != mdinTimeData && null != mdinTimeData[0] && null != mdinTimeData[0].rsrvImptYn && "Y" == mdinTimeData[0].rsrvImptYn)){
					mdinViewDivHtml += '<div class="rsrvimpt">* 해당기관은 ' + $("#layerApnmYmd").val() + ' 휴진일 입니다.</div>';
				}else{
					
					mdinViewDivHtml += '	<div class="choice-time">시간선택 : <span class="apnmHhTxtCls"></span></div>';
					mdinViewDivHtml += '	<ul class="view-time clearfix" id="apnmHhUl">';
	
					//해당 병원 하루 총 예약자
					var apnmTotCnt = 0;
					var mdinTimeDataLength = mdinTimeData.length;
					for(var lst = 0; lst < mdinTimeDataLength; lst++){
						apnmTotCnt += mdinTimeData[lst].rsrvTotCnt;	//해당 기관 하루 총 예약자 계산
					}
					
					for(var i = 0; i < 14; i++){
						var viewflg = false;
						var viewIdx = 0;
						for(var lst = 0; lst < mdinTimeDataLength; lst++){
							if("88" == mdinTimeData[lst].sclTpcd){
								console.log("!! : "+mdinTimeData[lst].timeHh + " : "+ mdinTimeData[lst].sclTpcd);
								if(apnmHhArr[i] == mdinTimeData[lst].timeHh &&  mdinTimeData[lst].rsrvTotCnt < mdinTimeData[lst].apnmTimeCnt && "N" == mdinTimeData[lst].rsrvImptYn){
									//해당 시간 	&&		예약인원 < 시간당 접종 가능인원 	&&		하루 총 예약자 < 하루 접종가능인원		&&	휴진일X
									viewflg = true;
									viewIdx = lst;
								}
							}else{
								if(apnmHhArr[i] == mdinTimeData[lst].timeHh &&  mdinTimeData[lst].rsrvTotCnt < mdinTimeData[lst].apnmTimeCnt && apnmTotCnt < mdinTimeData[lst].apnmDateCnt && "N" == mdinTimeData[lst].rsrvImptYn){
									//해당 시간 	&&		예약인원 < 시간당 접종 가능인원 	&&		하루 총 예약자 < 하루 접종가능인원		&&	휴진일X
									viewflg = true;
									viewIdx = lst;
								}
							}
						}
						if(viewflg){
							mdinViewDivHtml += '		<li class="" onmouseenter="javascript:mouseUp(\'' + (i+1) + '\')" onmouseleave="javascript:mouseDown(\'' + (i+1) + '\')">';
							mdinViewDivHtml += '			<a href="javascript:fnc_changeTime(\'' + (i+1) + '\');">' + apnmHhArr[i] + ':00</a>';
							mdinViewDivHtml += '			<div class="tooltip" id="tooltip' + (i+1) + '">예약현황<strong>' + mdinTimeData[viewIdx].rsrvTotCnt + "/" + mdinTimeData[viewIdx].apnmTimeCnt + '명</strong></div>';
							mdinViewDivHtml += '		</li>';
						}else{
							mdinViewDivHtml += '		<li class="disable" onmouseenter="javascript:mouseUp(\'' + (i+1) + '\')" onmouseleave="javascript:mouseDown(\'' + (i+1) + '\')">' + apnmHhArr[i] + ':00';
							mdinViewDivHtml += '			<div class="tooltip" id="tooltip' + (i+1) + '" style="line-height: 35px;"><strong>예약불가</strong></div>';
							mdinViewDivHtml += '		</li>';
						}
					}
					mdinViewDivHtml += '	</ul>'; 
				}
				mdinViewDivHtml += '	<table class="tbl-address">';
				mdinViewDivHtml += '		<tbody>';
				mdinViewDivHtml += '			<tr>';
				mdinViewDivHtml += '				<th scope="row">전화번호</th>';
				mdinViewDivHtml += '				<td><span class="tel">' + mdinListArray[index].orgTlno + '</span></td>';
				mdinViewDivHtml += '			</tr>';
				mdinViewDivHtml += '			<tr>';
				mdinViewDivHtml += '				<th scope="row">진료시간</th>';
				mdinViewDivHtml += '				<td class="">';
				mdinViewDivHtml += '					<ul>';
				
		
				if(null != mdinListArray[index].monSttTm && null !=  mdinListArray[index].monEndTm){
					mdinViewDivHtml += '					<li>월요일 : ' + mdinListArray[index].monSttTm.substring(0,2)+":" + mdinListArray[index].monSttTm.substring(2,4) + " ~ " + mdinListArray[index].monEndTm.substring(0,2)+":" + mdinListArray[index].monEndTm.substring(2,4);
					if(null != mdinListArray[index].monLunchSttTm && null !=  mdinListArray[index].monLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].monLunchSttTm.substring(0,2)+":" + mdinListArray[index].monLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].monLunchEndTm.substring(0,2)+":" + mdinListArray[index].monLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].monDinnerSttTm && null !=  mdinListArray[index].monDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].monDinnerSttTm.substring(0,2)+":" + mdinListArray[index].monDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].monDinnerEndTm.substring(0,2)+":" + mdinListArray[index].monDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>월요일 : 휴진</li>';
				}
				if(null != mdinListArray[index].tueSttTm && null !=  mdinListArray[index].tueEndTm){
					mdinViewDivHtml += '					<li>화요일 : ' + mdinListArray[index].tueSttTm.substring(0,2)+":" + mdinListArray[index].tueSttTm.substring(2,4) + " ~ " + mdinListArray[index].tueEndTm.substring(0,2)+":" + mdinListArray[index].tueEndTm.substring(2,4);
					if(null != mdinListArray[index].tueLunchSttTm && null !=  mdinListArray[index].tueLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].tueLunchSttTm.substring(0,2)+":" + mdinListArray[index].tueLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].tueLunchEndTm.substring(0,2)+":" + mdinListArray[index].tueLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].tueDinnerSttTm && null !=  mdinListArray[index].tueDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].tueDinnerSttTm.substring(0,2)+":" + mdinListArray[index].tueDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].tueDinnerEndTm.substring(0,2)+":" + mdinListArray[index].tueDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>화요일 : 휴진</li>';
				}
				if(null != mdinListArray[index].wedSttTm && null !=  mdinListArray[index].wedEndTm){
					mdinViewDivHtml += '					<li>수요일 : ' + mdinListArray[index].wedSttTm.substring(0,2)+":" + mdinListArray[index].wedSttTm.substring(2,4) + " ~ " + mdinListArray[index].wedEndTm.substring(0,2)+":" + mdinListArray[index].wedEndTm.substring(2,4);
					if(null != mdinListArray[index].wedLunchSttTm && null !=  mdinListArray[index].wedLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].wedLunchSttTm.substring(0,2)+":" + mdinListArray[index].wedLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].wedLunchEndTm.substring(0,2)+":" + mdinListArray[index].wedLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].wedDinnerSttTm && null !=  mdinListArray[index].wedDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].wedDinnerSttTm.substring(0,2)+":" + mdinListArray[index].wedDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].wedDinnerEndTm.substring(0,2)+":" + mdinListArray[index].wedDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>수요일 : 휴진</li>';
				}
				if(null != mdinListArray[index].thuSttTm && null !=  mdinListArray[index].thuEndTm){
					mdinViewDivHtml += '					<li>목요일 : ' + mdinListArray[index].thuSttTm.substring(0,2)+":" + mdinListArray[index].thuSttTm.substring(2,4) + " ~ " + mdinListArray[index].thuEndTm.substring(0,2)+":" + mdinListArray[index].thuEndTm.substring(2,4);
					if(null != mdinListArray[index].thuLunchSttTm && null !=  mdinListArray[index].thuLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].thuLunchSttTm.substring(0,2)+":" + mdinListArray[index].thuLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].thuLunchEndTm.substring(0,2)+":" + mdinListArray[index].thuLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].thuDinnerSttTm && null !=  mdinListArray[index].thuDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].thuDinnerSttTm.substring(0,2)+":" + mdinListArray[index].thuDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].thuDinnerEndTm.substring(0,2)+":" + mdinListArray[index].thuDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>목요일 : 휴진</li>';
				}
				if(null != mdinListArray[index].friSttTm && null !=  mdinListArray[index].friEndTm){
					mdinViewDivHtml += '					<li>금요일 : ' + mdinListArray[index].friSttTm.substring(0,2)+":" + mdinListArray[index].friSttTm.substring(2,4) + " ~ " + mdinListArray[index].friEndTm.substring(0,2)+":" + mdinListArray[index].friEndTm.substring(2,4);
					if(null != mdinListArray[index].friLunchSttTm && null !=  mdinListArray[index].friLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].friLunchSttTm.substring(0,2)+":" + mdinListArray[index].friLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].friLunchEndTm.substring(0,2)+":" + mdinListArray[index].friLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].friDinnerSttTm && null !=  mdinListArray[index].friDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].friDinnerSttTm.substring(0,2)+":" + mdinListArray[index].friDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].friDinnerEndTm.substring(0,2)+":" + mdinListArray[index].friDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>금요일 : 휴진</li>';
				}
				if(null != mdinListArray[index].satSttTm && null !=  mdinListArray[index].satEndTm){
					mdinViewDivHtml += '					<li>토요일 : ' + mdinListArray[index].satSttTm.substring(0,2)+":" + mdinListArray[index].satSttTm.substring(2,4) + " ~ " + mdinListArray[index].satEndTm.substring(0,2)+":" + mdinListArray[index].satEndTm.substring(2,4);
					if(null != mdinListArray[index].satLunchSttTm && null !=  mdinListArray[index].satLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].satLunchSttTm.substring(0,2)+":" + mdinListArray[index].satLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].satLunchEndTm.substring(0,2)+":" + mdinListArray[index].satLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].satDinnerSttTm && null !=  mdinListArray[index].satDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].satDinnerSttTm.substring(0,2)+":" + mdinListArray[index].satDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].satDinnerEndTm.substring(0,2)+":" + mdinListArray[index].satDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>토요일 : 휴진</li>';
				}
				if(null != mdinListArray[index].sunSttTm && null !=  mdinListArray[index].sunEndTm){
					mdinViewDivHtml += '					<li>일요일 : ' + mdinListArray[index].sunSttTm.substring(0,2)+":" + mdinListArray[index].sunSttTm.substring(2,4) + " ~ " + mdinListArray[index].sunEndTm.substring(0,2)+":" + mdinListArray[index].sunEndTm.substring(2,4);
					if(null != mdinListArray[index].sunLunchSttTm && null !=  mdinListArray[index].sunLunchEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 점심시간 : '+ mdinListArray[index].sunLunchSttTm.substring(0,2)+":" + mdinListArray[index].sunLunchSttTm.substring(2,4) + " ~ " + mdinListArray[index].sunLunchEndTm.substring(0,2)+":" + mdinListArray[index].sunLunchEndTm.substring(2,4);
					}
					if(null != mdinListArray[index].sunDinnerSttTm && null !=  mdinListArray[index].sunDinnerEndTm){
						mdinViewDivHtml += '<br/>';
						mdinViewDivHtml += '&nbsp;&nbsp;- 저녁시간 : '+ mdinListArray[index].sunDinnerSttTm.substring(0,2)+":" + mdinListArray[index].sunDinnerSttTm.substring(2,4) + " ~ " + mdinListArray[index].sunDinnerEndTm.substring(0,2)+":" + mdinListArray[index].sunDinnerEndTm.substring(2,4);
					}
					mdinViewDivHtml += '					</li>';
				}else{
					mdinViewDivHtml += '					<li>일요일 : 휴진</li>';
				}
				mdinViewDivHtml += '					</ul>';
				mdinViewDivHtml += '				</td>';
				mdinViewDivHtml += '			</tr>';
				mdinViewDivHtml += '            <tr>';
                mdinViewDivHtml += '            	<th scope="row">장애인<br/>편의시설</th>';
                mdinViewDivHtml += '            	</th>';
                mdinViewDivHtml += '            	<td>';
				
                var cvntl001Yn = "X";
                var cvntl002Yn = "X";
                var cvntl003Yn = "X";
                var cvntl004Yn = "X";
                var cvntl005Yn = "X";
                var cvntl006Yn = "X";
                var cvntl007Yn = "X";
                var cvntl008Yn = "X";
                var cvntl009Yn = "X";
                var cvntl010Yn = "X";
                var cvntl011Yn = "X";
                
                if(null != orgCvntlInfoData){
                	cvntl001Yn = (orgCvntlInfoData.cvntl001Yn=="Y"?"O":"X");
                    cvntl002Yn = (orgCvntlInfoData.cvntl002Yn=="Y"?"O":"X");
                    cvntl003Yn = (orgCvntlInfoData.cvntl003Yn=="Y"?"O":"X");
                    cvntl004Yn = (orgCvntlInfoData.cvntl004Yn=="Y"?"O":"X");
                    cvntl005Yn = (orgCvntlInfoData.cvntl005Yn=="Y"?"O":"X");
                    cvntl006Yn = (orgCvntlInfoData.cvntl006Yn=="Y"?"O":"X");
                    cvntl007Yn = (orgCvntlInfoData.cvntl007Yn=="Y"?"O":"X");
                    cvntl008Yn = (orgCvntlInfoData.cvntl008Yn=="Y"?"O":"X");
                    cvntl009Yn = (orgCvntlInfoData.cvntl009Yn=="Y"?"O":"X");
                    cvntl010Yn = (orgCvntlInfoData.cvntl010Yn=="Y"?"O":"X");
                    cvntl011Yn = (orgCvntlInfoData.cvntl011Yn=="Y"?"O":"X");
           		}
     			mdinViewDivHtml += '                    <ul>';
     			mdinViewDivHtml += '                    	<li>장애인 특별 교통수단·이송 지원체계 <span style="color:red;">(' + cvntl001Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>장애인전용 주차구역 <span style="color:red;">(' + cvntl002Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>휠체어 이동가능 통로 폭(1.2m 이상) <span style="color:red;">(' + cvntl003Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>장애인용승강기, 경사로, 휠체어 리프트 <span style="color:red;">(' + cvntl004Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>장애인 등의 이용이 가능한 화장실 <span style="color:red;">(' + cvntl005Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>QR코드 삽입된 서식 활용 <span style="color:red;">(' + cvntl006Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>시각 및 청각장애인 유도 안내 설비 <span style="color:red;">(' + cvntl007Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>의사소통 도움판 활용 <span style="color:red;">(' + cvntl008Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>수어통역사 배치 (또는 수어통역센터 안내) <span style="color:red;">(' + cvntl009Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>이상반응 등 관련 정보 제공 안내(1339 또는 손말이음센터 안내문 게시) <span style="color:red;">(' + cvntl010Yn + ')</span></li>';
     			mdinViewDivHtml += '                    	<li>유도선 및 점자유도블록 설치 <span style="color:red;">(' + cvntl011Yn + ')</span></li>';
     			mdinViewDivHtml += '                    </ul>';
                mdinViewDivHtml += '            	</td>';
                mdinViewDivHtml += '            </tr>';
				mdinViewDivHtml += '		</tbody>';
				mdinViewDivHtml += '	</table>';
				
				mdinViewDivHtml += '</div>';
			
				$("#mdinViewDiv").html(mdinViewDivHtml);                            //의료기관상세정보
				$("#blind").remove();
			    $('.choice-medi').hide();
			    $('.find-medi').fadeIn(300);
			    $('.find-medi').css('z-index', '100');
			    $('<div id="blind"></div>').css('opacity',0.6).appendTo('body');
			    $('#blind').css({'height' : $('html').prop("scrollHeight")+'px'});	
			}, error : function(){
				customAlert("의료기관 조회 중 오류가 발생하였습니다.");
				return;
			}
		});
	}
	
	//레이어_예약가능인원 출력
	function mouseUp(id){
		$("#tooltip"+id).addClass('on');
	}
	//레이어_예약가능인원 숨김
	function mouseDown(id){
		$("#tooltip"+id).removeClass('on');
	}
	
	//레이어_시간선택 변경
	function fnc_changeTime(apnmHhTy){
		
		$("#apnmHhUl li").removeClass('selected');
		$("#apnmHhUl li").eq((apnmHhTy-1)).addClass("selected");
		$("#layerApnmHhTy").val(apnmHhTy);
		$(".apnmHhTxtCls").html(apnmHhArr[(apnmHhTy-1)]+":00");
	}
	
	function onlyNumber(obj) {
	    $(obj).keyup(function(){
	        $(this).val($(this).val().replace(/[^0-9]/g,""));
	        if($(this).attr("id") == "apnmRrn1" && $(this).val().length == 6){
	        	$("#apnmRrn2").focus();
	        }else if($(this).attr("id") == "apnmMtnoTofmn" && $(this).val().length == 3){
	        	$("#apnmMtno1").focus();
	        }else if($(this).attr("id") == "apnmMtno1" && $(this).val().length == 4){
	        	$("#apnmMtno2").focus();
	        }else if($(this).attr("id") == "ptntRrn1" && $(this).val().length == 6){
	        	$("#ptntRrn2").focus();
	        }
	    });
	}
	
</script>
<div id = "rsrvRgstPage">
<div class="dim" ></div>
    <div class="sub-visual">
      <h2>예방접종 예약하기<strong>본인 인증 단계</strong></h2>
      <ul class="step-identity clearfix">
        <li class="active">대상자 확인</li>
        <li>의료기관 선택</li>
        <li>예약완료</li>
      </ul><!-- //step-identity -->
    </div><!-- //sub-visual -->

    <form action="" id="vcnRsrvFrm" name="vcnRsrvFrm" method="post">
    	<input type="hidden" id="apnmTy" 			name="apnmTy" 			value="mi"/>
    	<input type="hidden" id="apnmNo" 			name="apnmNo" 			value=""/>
        <input type="hidden" id="vcntme" 			name="vcntme" 			value="1"/>
    	<input type="hidden" id="orgcd" 			name="orgcd" 			value=""/>
		<input type="hidden" id="cnfmType" 			name="cnfmType" 		value=""/>
		<input type="hidden" id="apnmYmd" 			name="apnmYmd" 			value=""/>
		<input type="hidden" id="apnmHh" 			name="apnmHh" 			value=""/>
		<input type="hidden" id="entrTpcd" 			name="entrTpcd" 		value="M"/><!-- N:대국민예약, M:모바일예약 -->
		<input type="hidden" id="rsrvKind" 			name="rsrvKind" 		value=""/>
		<input type="hidden" id="rsrvKindDtl" 		name="rsrvKindDtl" 		value=""/>
		<input type="hidden" id="selfCrtfInfmCi" 	name="selfCrtfInfmCi" 	value=""/>
		<input type="hidden" id="selfCrtfInfmCiEnc" name="selfCrtfInfmCiEnc" value="kG4oqgtTRaHdt9ZunAHBOoXhna+FqFc6/t1rxNahgH7/OkNC4XmZr+Brigfb6uJj1OrFygxQCYECl5f2hvi2OuP5P0cPd/Ku7iiUoPHxsCwHsTuimTAxzLCOkPQMeQDJWIEKksoeLiK3zChr7vXRIw=="/>
		<input type="hidden" id="selfCrtfInfmDi" 	name="selfCrtfInfmDi" 	value=""/>
		<input type="hidden" id="nhisYn" 			name="nhisYn" 			value=""/>
		<input type="hidden" id="nhisPassYn" 		name="nhisPassYn" 		value=""/>
		<input type="hidden" id="uprOrgcd" 			name="uprOrgcd" 		value=""/>
		<input type="hidden" id="vacMkrCd" 			name="vacMkrCd" value=""/>
		<input type="hidden" id="rsrvType" 			name="rsrvType" value=""/>
		
		
		<input type="hidden" id="tokKey" name="tokKey" value="564acffa98d76c65dc5db147da3e65af4df02321e623063fc1c84ca775c8e7a13c706ae8cd2ffc7c2d2c9bf3ac29fa23565ad225c19c599677efb6ff1264f47ac39ea4c9362be8cd69ea48f17b152f8725a21a8af745a99aa2af563f899b0254bce9f2f8180d3a12f837a1d0fe62"/>
		
    <div class="content-box">
      <div class="box-use">
        <h3>개인정보 수집 및 이용에 대한 안내</h3>
        <p>「감염병의 예방 및 관리에 관한 법률」 <br />제33조의 4 및 같은 법 시행령 제32조의 3에 따라 코로나19 예방접종 예약신청을 위하여 다음의 개인정보를 수집합니다.</p>
      </div>
	      <div style="padding-left: 20px;">
	          <ul class="warn-list">
	              <li>본인 인증된 사용자를 변경하거나, 이전화면으로 돌아가면 인증 및 대기열을 다시 진행하셔야 합니다.</li>
	          </ul>
	       </div>   
	      <br/>
	  <div class="form-row">
        <h4>본인/대리 예약 구분<i class="reqire">*</i></h4>
        <label for="pprlrCd">본인/대리 예약 구분</label>
		<span class="radio-wrap"><input type="radio" name="pprlrCd" id="pprlrCd1" value="1" checked="checked"/><label for="pprlrCd1">본인예약</label></span>
		<span class="radio-wrap"><input type="radio" name="pprlrCd" id="pprlrCd2" value="6"/><label for="pprlrCd2">대리예약</label></span>
      </div><!-- //form-row -->    
      
      <div class="form-row" id="selfRsrvTr1" style="display:none;">
        <h4>대리 예약자 이름<i class="reqire">*</i></h4>
        <label for="apnmNm">대리 예약자 이름</label>
        <input type="text" name="apnmNm" id="apnmNm" value="" class="korean" maxlength="80"/>
      </div><!-- //form-row -->
      <div class="form-row" id="selfRsrvTr2" style="display:none;">
        <h4>대리 예약자 주민등록번호<i class="reqire">*</i></h4>
        <label for="apnmRrn1">대리 예약자 주민등록번호 앞자리</label>
	        <input type="text" id="apnmRrn1" name="apnmRrn1" maxlength="6" value="" class="double" onkeyup="onlyNumber(this);" />
	        <span>-</span>
    	    <label for="apnmRrn2">대리 예약자 주민등록번호 뒷자리</label>
        	<input type="password" autocomplete="off" id="apnmRrn2" name="apnmRrn2" maxlength="7" value="" class="double" onkeyup="onlyNumber(this);" />
      </div><!-- //form-row -->
      
      <div class="form-row" >
        <h4>접종받는 분(피접종자) 이름<i class="reqire">*</i></h4>
        <label for="patnam">접종받는 분(피접종자) 이름</label>
        <input type="text" name="patnam" id="patnam" value="" class="korean" maxlength="80"/>
      </div><!-- //form-row -->
      <div class="form-row">
        <h4>접종받는 분(피접종자) 주민등록번호<i class="reqire">*</i></h4>
        <label for="ptntRrn1">접종받는 분(피접종자) 주민등록번호 앞자리</label>
	        <input type="text" id="ptntRrn1" name="ptntRrn1" maxlength="6" value="" class="double" onkeyup="onlyNumber(this);" />
	        <span>-</span>
    	    <label for="apnmRrn2">접종받는 분(피접종자) 주민등록번호 뒷자리</label>
        	<input type="password" autocomplete="off" id="ptntRrn2" name="ptntRrn2" maxlength="7" value="" class="double" onkeyup="onlyNumber(this);" />
	       <input type="button" class="button-search wide2 orange" id = "tgtSearchBtn" value="대상자 확인" />
      </div><!-- //form-row -->

		<div class="form-row">
		 <div class="vcnMsg">
        	<h4>예약대상 백신</h4>
        	<p id="vcnMsg">-</p>
         </div>
         </div>
         <div class="form-row">
          <div class="rsrvKindMsg">
        	<h4>예약대상자 구분</h4>
        	<p id="rsrvKindMsg">-</p>
        	
			
        	<select id='rsrvKindDtlSel' style='width:100%; display:none;'>
	        	<option value='0'>대상군 선택</option>
	        	<option value='1'>우선접종 직업군</option>
	        	<option value='2'>기저질환자</option>
	        	<option value='3'>의료기관 종사자(의원 등)</option>
	       	</select>
	       	<ul class="warn-list" id="rsrvKindDtlUl" style='display:none;'>
	        	<li>우선접종 직업군 : 1차대응요원, 사회필수인력(경찰,소방,군인 등), 특수교육.보육, 보건교사 및 어린이집 간호인력, 돌봄 종사자, 사회취약 돌봄 종사자, 보건의료인</li>
				<li>기저질환자 : 내분비 장애, 심혈관 질환, 만성 신장 질환, 만성 호흡기 질환, 신경계 질환, 소화기 질환</li>
            </ul>
         </div>
         </div>

         <div class="form-row" id="prgnYnTr" style="display:none;">
        	<h4>임신여부<i class="reqire">*</i></h4>
			<label for="prgnYn">임신여부</label>
	        	<span class="radio-wrap"><input type="radio" name="prgnYn" id="prgnYn1" value="N" checked="checked"/><label for="prgnYn1">임신 중 아님</label></span>
				<span class="radio-wrap"><input type="radio" name="prgnYn" id="prgnYn2" value="Y"/><label for="prgnYn2">임신 중</label></span>
         </div>

         <div class="form-row" id="dueYmdTr" style="display:none;">
        	<h4>출산예정일<i class="reqire">*</i></h4>
        	<label for="dueYmd">출산예정일</label>
        		<input type="text" class="datepicker" id="dueYmd" name="dueYmd" placeholder="날짜선택" readonly="readonly" />
         </div>
						
      <div class="form-row">
        <h4>휴대폰 번호<i class="reqire">*</i></h4>
        <label for="apnmMtnoTofmn">휴대폰 번호 앞자리</label>
		<input type="text" name="apnmMtnoTofmn" id="apnmMtnoTofmn" class="input-number triple" maxlength="3" value="" onkeyup="onlyNumber(this);"/><span>-</span><input type="text" name="apnmMtno1" id="apnmMtno1" class="input-number triple" maxlength="4" value="" onkeyup="onlyNumber(this)"/><span>-</span><input type="text" name="apnmMtno2" id="apnmMtno2" class="input-number triple" maxlength="4" value="" onkeyup="onlyNumber(this);"/>
        <ul class="warn-list">
          <li>예약정보는 휴대폰 번호로 전송해드리오니, 확인 후 예약일시에 맞춰 의료기관에 방문해주세요.</li>
        </ul><!-- //warn-list -->
      </div><!-- //form-row -->
      <div class="form-row">
        <h4>국민비서 알림 선택<i class="reqire">*</i></h4>
        <p class="strong">백신접종 일시 장소 주의사항 등을 휴대전화로 알려드립니다.</p>
      </div><!-- //form-row -->
      <div class="form-row">
        <table class="tbl-reservation">
			<tbody>
				<tr>
					<th scope="row" rowspan="" style="width:110px">국민비서<br/>&nbsp;&nbsp;&nbsp;알림선택<i class="reqire">*</i></th>
					<td colspan="">
							<span class="radio-wrap"><input type="radio" class="smsRcptAgrmYn" name="smsRcptAgrmYn" id="smsRcptAgrmYn1" value="B"/><label for="smsRcptAgrmYn1">네이버앱</label></span><br/>
							<span class="radio-wrap"><input type="radio" class="smsRcptAgrmYn" name="smsRcptAgrmYn" id="smsRcptAgrmYn2" value="A"/><label for="smsRcptAgrmYn2">카톡(카카오톡)</label></span><br/>
							<span class="radio-wrap"><input type="radio" class="smsRcptAgrmYn" name="smsRcptAgrmYn" id="smsRcptAgrmYn3" value="C"/><label for="smsRcptAgrmYn3">토스(toss)</label></span><br/>
							<span class="radio-wrap"><input type="radio" class="smsRcptAgrmYn" name="smsRcptAgrmYn" id="smsRcptAgrmYn4" value="Y"/><label for="smsRcptAgrmYn4" style="width:90px;">문자메시지</label></span><br/>
							<span class="radio-wrap"><input type="radio" class="smsRcptAgrmYn" name="smsRcptAgrmYn" id="smsRcptAgrmYn5" value="N"/><label for="smsRcptAgrmYn5">수신받지 않음</label></span>
					</td>
				</tr>
			</tbody>
		</table>
      </div><!-- //form-row -->
    </div><!-- //content-box -->
    <div class="bottom-wrap">
      <div class="button-group">
        <input type="button" class="button button-white homeMsgBtn" value="취소" />
        <input type="button" class="button button-blue" id = "searchMc" value="다음으로" />
      </div><!-- //button-group -->
    </div><!-- //bottom-wrap -->
    </form>

<!-- //layer-find -->
<!-- //layer-confirm -->
<div id="calcle02" class="layer-confirm">
	<div class="layer-header">
		<h2>홈으로</h2>
		<span class="close-confirm vcnRsrvCnfmBtn">닫기</span>
	</div>
	<!-- //layer-header -->
	<div class="body-confirm">
		입력한 정보가 초기화 됩니다. 홈화면으로 돌아가시겠습니까?
	</div>
	<!-- //body-confirm -->
	<div class="layer-footer">
		<button class="btn white close-confirm" onclick="return false;">아니오</button>
		<button class="btn blue homeBtn" onclick="return false;">예</button>
	</div>
	<!-- //layer-footer -->
</div>

<div id="calcle03" class="layer-confirm" style="height: auto;">
	<div class="layer-header">
		<h2>이름 변경</h2>
		<span class="close-confirm vcnRsrvCnfmBtn">닫기</span>
	</div>
	<!-- //layer-header -->
	<div class="body-confirm" id="nameMsgDiv" style="height: auto">
	</div>
	<!-- //body-confirm -->
	<div class="layer-footer">
		<button class="btn white close-confirm"  id="nameNoChgBtn" onclick="return false;">취소</button>
		<button class="btn blue close-confirm" id="nameChgBtn" onclick="return false;">확인</button>
	</div>
	<!-- //layer-footer -->
</div>
</div>
<div id = "rsrvRgstSearchMcPage" style="display:none">
 
      <div class="dim"></div>
    <div class="sub-visual">
      <h2>예방접종 예약하기<strong>의료기관 선택 단계</strong></h2>
      <ul class="step-identity clearfix">
        <li>본인인증</li>
        <li class="active">의료기관 선택</li>
        <li>예약완료</li>
      </ul><!-- //step-identity -->
    </div><!-- //sub-visual -->
    <form action="">
    <div class="content-box">
      <div class="form-row" style="padding:20px 20px 10px 20px">
        <h4>예약일시 선택 및 의료기관 찾기<i class="reqire">*</i></h4>
        <button class="button-search wide2 orange" id="mdinSearchBtn">의료기관 찾기</button>
        <ul class="list-center" id="apnmDiv">
        </ul>
      </div><!-- //form-row -->
      <div class="bottom-wrap" style="padding: 10px 20px 0px 20px">
      <div class="button-group" style="padding: 20px 0px 20px 0px ">
        <input type="button" class="button button-white" id = "backRsrvRgst" value="이전" />
        <input type="button" class="button button-blue" id = "insertVcnRsrvMsgBtn" onclick="return false;" value="예약하기" />
      </div><!-- //button-group -->
    </div><!-- //bottom-wrap --> 
      <div class="form-row">
        <ul class="warn-list">
          <li>부득이한 사정으로 인하여 예약일시에 백신접종을 진행하지 못한 경우, 접종 미완료가 확인될 때까지 예약이 불가능하오니 신중하게 선택해주세요.</li>
        </ul><!-- //warn-list -->
      </div><!-- //form-row -->
    </div><!-- //content-box -->
    <!-- 레이어 팝업 -->
    <!-- 지역 입력 -->
    <div class="layer-find find-area" style="height:600px">
      <div class="layer-header long-header">
        <h2>의료기관 찾기</h2>
        <span class="close-layer">닫기</span>
        <ul class="step-identity clearfix">
          <li class="active">지역 입력</li>
          <li class="">의료기관 선택</li>
          <li class="">선택 완료</li>
        </ul><!-- //step-identity -->
      </div><!-- //layer-header -->
      <div class="layer-body">
        <div class="find-date clearfix">
          <input type="text" class="datepicker" id="layerApnmYmd" name="layerApnmYmd" placeholder="날짜선택" readonly="readonly" />
        </div><!-- //find-date -->
        <div class="find-form">
        <select name="sidocd" id="sidocd">
            <option value=''>광역시도</option>
            
                <option value="11">서울특별시</option>
            
                <option value="26">부산광역시</option>
            
                <option value="27">대구광역시</option>
            
                <option value="28">인천광역시</option>
            
                <option value="29">광주광역시</option>
            
                <option value="30">대전광역시</option>
            
                <option value="31">울산광역시</option>
            
                <option value="36">세종특별자치시</option>
            
                <option value="41">경기도</option>
            
                <option value="42">강원도</option>
            
                <option value="43">충청북도</option>
            
                <option value="44">충청남도</option>
            
                <option value="45">전라북도</option>
            
                <option value="46">전라남도</option>
            
                <option value="47">경상북도</option>
            
                <option value="48">경상남도</option>
            
                <option value="50">제주특별자치도</option>
            
        </select>
        <select name="sggcd" id="sggcd">
            <option value=''>시군구</option>
        </select>
        <select name="emdcd" id="emdcd">
            <option value=''>읍면동</option>
        </select>
                <input type="text" id="orgnmTxt" name="orgnmTxt" placeholder="의료기관명 입력" style="display:none"/>
        </div>
      </div><!-- //layer-body -->
      <div class="layer-footer foot-top" style="margin-top:40px;">
        <button class="btn wide blue" onclick="return false;" id="choice-medi">의료기관 찾기</button>
      </div><!-- //layer-footer -->
    </div><!-- //layer-find -->
    
    
    <!-- 의료기관 선택 -->
    <div class="layer-find choice-medi">
      <div class="layer-header long-header">
        <h2>의료기관 찾기</h2>
        <span class="close-layer">닫기</span>
        <ul class="step-identity clearfix">
          <li class="selResion">지역 입력</li>
          <li class="active">의료기관 선택</li>
          <li class="">선택 완료</li>
        </ul><!-- //step-identity -->
      </div><!-- //layer-header -->
      <div class="layer-body">
        <div class="view-address">
          <ul class="clearfix" id="searchCtnt">
            <li></li>
            <li></li>
            <li></li>
          </ul>
          <div style="display:none">오송생명2로 187 오송보건의료행정타운</div>
        </div><!-- //view-address -->
        <div class="view-medi">
          <p class="result-txt" id="listCnt">검색결과 총 0개</p>
          <div class="wrap-result mdinListDiv">
            <div id="mdinListDiv"></div>
          </div><!-- //wrap-result -->
        </div><!-- //view-medi -->
      </div><!-- //layer-body -->
    </div><!-- //layer-find -->
    <!-- 선택 완료 -->
    
    
    <div class="layer-find find-medi">
      <div class="layer-header long-header">
        <h2>의료기관 찾기</h2>
        <span class="close-layer">닫기</span>
        <ul class="step-identity clearfix">
          <li class="selResion">지역 입력</li>
          <li class="selHspl">의료기관 선택</li>
          <li class="active">선택 완료</li>
        </ul><!-- //step-identity -->
      </div><!-- //layer-header -->
      <div class="layer-body mdinViewDiv">
        <div id="mdinViewDiv"></div>
      </div><!-- //layer-body -->
        <div class="layer-footer" id="mdinSelDiv">
            <button class="btn wide orange" onclick="return false;" id="mdinSelBtn">선택</button>
            <input type="hidden" id="layerOrgcd" name="layerOrgcd" value="" />
            <input type="hidden" id="layerOrgnm" name="layerOrgnm" value="" />
            <input type="hidden" id="layerApnmHhTy" name="layerApnmHhTy" value="" />
      </div><!-- //layer-footer -->
    </div><!-- //layer-find -->
    <!--// 레이어 팝업 -->
    </form>
</div>

<div id="calcle01" class="layer-confirm">
    <div class="layer-header">
        <h2>예약 확인</h2>
        <span class="close-confirm">닫기</span>
    </div>
    <!-- //layer-header -->
    <div class="body-confirm">코로나19 예방접종을 예약하시겠습니까?</div>
    <!-- //body-confirm -->
    <div class="layer-footer">
        <button class="btn white close-confirm">아니오</button>
        <button class="btn blue" id="insertVcnRsrvBtn" onclick="return false;">예</button>
    </div>
    <!-- //layer-footer -->
</div>
		</div>
	</div>
	
	<!-- Footer -->
	<div id="footer-warp">
		<footer>
			<div class="footer">
	        <h5>코로나19 예방접종 사전예약 시스템</h5>
	        <ul class="kdca-info">
	          <li><a href="https://www.kdca.go.kr/menu.es?mid=a20810030000" target="_blank" >개인정보처리방침</a></li>
	          <li><a href="https://www.kdca.go.kr/" target="_blank" title="새창열기">질병관리청 바로가기</a></li>
	        </ul>
	        <div class="nuri"><img src="https://ncvr.kdca.go.kr/cobk/images/egovframework/rte/rsrv/mbl/nuri.png" alt="OPEN/출처표시/상업용금지/변경금지/공공누리 공공저작물 자유이용허락" /></div>
	        <address>(28159) 충북 청주시 흥덕구 오송읍 오송생명2로 187 오송보건의료행정타운내 질병관리청</address>
	        <p class="copyright">COPYRIGHT © 2021 질병관리청 ALL RIGHTS RESERVED.</p>
	      </div>
		</footer><!-- //footer -->
	</div>
<!-- // Footer -->
</div>
<script>
$(document).ready(function(){
	
});
</script>
</body>
</html>