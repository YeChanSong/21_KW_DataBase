


<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
    <title>코로나19 예방접종 사전예약 시스템</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store">
    <meta http-equiv="Expires" content="-1">
    <meta http-equiv="Pragma" content="no-cache">

    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Xss-Protection" content="1; mode=block">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

    <meta name="title" content="코로나19 예방접종 사전예약 시스템">
    <meta property="og:type" content="website">
    <meta property="og:title" content="코로나19 예방접종 사전예약 시스템">
    <meta property="og:site_name" content="코로나19 예방접종 사전예약 시스템">
    <meta property="og:description" content="코로나19 예방접종 사전예약 시스템">
    <meta property="og:url" content="https://ncvr2.kdca.go.kr">

<script
	src="/js/login/jquery-3.5.1.min.js"></script>
<script
	src="/js/login/jquery-ui.js"></script>
<script src="/js/netfunnel.js"></script>

<!-- #FAVICONS -->
<link rel="shortcut icon"
	href="/images/favicon.ico"
	type="image/x-icon">
<link rel="icon" href="/images/favicon.ico"
	type="image/x-icon">

<link rel="stylesheet"
	href="/stylesheets/login/ui_pack.css">
<link rel="stylesheet"
	href="/stylesheets/login/ui_kdca.css">
<body>
	<div class="wrapper">
    <!-- header -->
    

<html>
  <header>
    <a>질병관리청</a>
    <div class="title-logo">
      <span>코로나바이러스감염증-19 │ COVID-19</span>
      <p>코로나19 예방접종 사전예약 시스템</p>
    </div>
  </header>
</html>


		<div class="main-ready auth">
			<h2 class="auth-head">접종자 정보 입력</h2>
			<form class="-bg-white -border-top auth-wrapper" name="auth"
				method="post">
				<fieldset>
					<legend>인증 페이지</legend>
					<div class="auth-input-wrapper">
						<div class="auth-input">
							<div class="">
								<label for="">이름</label>
							</div>
							<div class="">
								<input type="text" name="name" id="name" value="" class="-input"
									placeholder="홍길동">
							</div>
						</div>
						<div class="auth-input">
							<div class="">
								<label for="">생년월일</label>
							</div>
							<div class="">
								<input type="text" name="birth" id="birth" value=""
									class="-input" maxlength="8" placeholder="8자리 (예:19930101)">
							</div>
						</div>						
						<div class="auth-input auth-input04">
							<div class="row-input row-input00">
								<label for="">휴대폰번호</label>
							</div>
							<div class="row-input row-input01">
								<select class="-input -input01" name="telcoTycd" id="telcoTycd">
									<option value="S">SKT</option>
									<option value="K">KT</option>
									<option value="L">LGU+</option>
								</select> <select class="-input -input02" name="telcoId" id="telcoId">
									<option value="010">010</option>
									<option value="011">011</option>
									<option value="016">016</option>
									<option value="017">017</option>
									<option value="018">018</option>
									<option value="019">019</option>
								</select> <input type="tel" name="phone" id="phone" value=""
									class="-input phone" maxlength="8" placeholder="'-'제외하고 숫자만 입력" >
							</div>
						</div>
					</div>
					<div class="">
						<div class="auth-from-wrap -border-bottom all">
							<p>접종자 정보 제공에 대한 동의</p>
							<div class="">
								<!-- <button type="button" name="button" class="-btn primary- small-" onClick="javascript:agreeAll();" >전체동의</button> -->
							</div>
						</div>
						<div class="auth-from-wrap">
							<div class="">
								<input type="checkbox" class="-check" id="agreeEssential">
								<label for="agreeEssential"> <em class="-label">제3자
										정보제공 동의(필수)</em>
								</label>
							</div>
							<div class="">
								<button type="button" name="button"
									class="-btn secondary- small-"
									onclick="javascript:agreeOpen('agree');">자세히보기</button>
							</div>
						</div>
					</div>
					<div class="action-btn-wrapper">
						<button type="button" name="button" id="btn_auth"
							class="-btn primary-">확인</button>
					</div>
				</fieldset>
				<input type="hidden" NAME="cert" value="" /> <input type="hidden"
					NAME="req" value="" /> <input type="hidden" NAME="errorType"
					value="" />
			</form>
		</div>
	</div>
	    <!-- footer -->
    


<html>
  <footer>
    <div class="footer">
      <h5>코로나19 예방접종 사전예약 시스템</h5>
      <div class="nuri"><img src="/images/nuri.png" alt="OPEN/출처표시/상업용금지/변경금지/공공누리 공공저작물 자유이용허락"></div>
      <address>(28159) 충북 청주시 흥덕구 오송읍 오송생명2로 187 오송보건의료행정타운내 질병관리청</address>
      <p class="copyright">COPYRIGHT © 2021 질병관리청 ALL RIGHTS RESERVED.</p>
    </div>
  </footer>
</html>


	<div class="dimmed open" id="agree" style="display: none">
		<section class="-wrapper-popup open -mb-4">
			<div class="-header">
				<p class="-h2">개인정보 제3자 제공동의(필수)</p>
				<div class="-button-wrapper">
					<button class="-btn close" type="button"
						onclick="javascript:clkBtn('agree')">close</button>
				</div>
			</div>
			<div class="-contents">
				질병관리청은 PASS 인증서의 원활한 진행을 위해 다음과 같은 정보를 주식회사 아톤, SK텔레콤 주식회사, 주식회사
				케이티, 주식회사 LG유플러스에 제공합니다. 취득한 개인정보는 “통신비밀보호법”, “전자통신사업법”, 전자서명법 및
				“정보통신망 이용촉진 및 정보보호 등에 관한 법률” 등 정보통신서비스 제공자가 준수하여야 할 관련 법령 상의 개인정보 보호
				규정을 준수합니다.<br />
				<br /> - 제공받는자 : (주)아톤, SK텔레콤(주), (주)KT, (주)LG유플러스<br />
				<br /> - 제공 목적 : 개인 식별을 통한 부정이용 방지(로그인/간편인증/전자서명 서비스 제공)<br />
				<br /> - 제공하는 개인정보 : 전화번호, 이름, 생년월일, 통신사<br />
				<br /> - 보유기간 : 본 서비스 해지 시 까지 또는 관계 법령에 따른 보관의무 기간 동안 보관<br />
				<br /> “서비스” 제공을 위해 필요한 최소한의 개인정보이므로 동의를 해주셔야 “서비스” 이용이 가능합니다.
			</div>
			<footer class="-footer">
				<button type="button" name="button" class="-btn primary- auto-"
					onclick="javascript:clkBtn('agree')">확인</button>
			</footer>
		</section>
	</div>
</body>
<script>	
function clkBtn(popupType){ 
	if(popupType == 'agree'){
	    var popupDiv = document.getElementById('agree');
	    agree.style.display = 'none';
	}
  }
  
function agreeOpen(popupType){ 
	if(popupType == 'agree'){
	    var popupDiv = document.getElementById('agree');
	    agree.style.display = 'block';
	}
  }
	  
$(document).ready(function() {
	NetFunnel_Complete();
	
	document.oncontextmenu = new Function('return false');
	document.addEventListener('keydown', function(event) {
		  if (event.keyCode === 13) {
		    event.preventDefault();
		  };
	}, true);
	
    $("#name").on("keypress keyup", function(event) {

        const whiteList = ["ArrowLeft", "ArrowRight"];
        const allowedKey = whiteList.some(function(elem,index,arr){
            return elem == event.key;
        });
        const reg_data = /[^ㄱ-힣a-zA-Z'-\s]/gi;
        if (!allowedKey) {
            if (reg_data.test(event.key)) {
                event.preventDefault();
            }
        }
    });
    $("#birth, input[name=phone]").keyup(function(event){
        var start = this.selectionStart,
        end = this.selectionEnd;
        
    	if (!(event.keyCode >=37 && event.keyCode<=40)) {  
    	    var inputVal = $(this).val();
    	    $(this).val(inputVal.replace(/[^0-9]/gi,''));
    	}
    	
        this.setSelectionRange(start, end);
    });
	$("#btn_auth").on("click" , function() {
    	    const params = {};
            params.name = $("#name").val();
            params.birth = $("#birth").val();
            params.phone = $("#telcoId option:selected").val()+$("#phone").val();            
            params.telcoTycd = $("#telcoTycd option:selected").val();
            phone_valid = $("#phone").val();
            
            if(!isNotEmpty(params.name) && !isNotEmpty(params.birth) && !isNotEmpty(phone_valid)) {     
                alert("이름, 생년월일, 휴대폰번호 입력 및 간편인증서비스 이용에 대한 동의는 필수입니다.");
                return;       	
            } else {
            	var regexnameEnKr = /^[가-힣a-zA-Z'-\s]+$/; // 영문/한글 띄어쓰기만            	
            	if(!regexnameEnKr.test(params.name) || !isNotEmpty(params.name)){
                	alert("이름을 다시 입력해주세요");
                	return;
                }
                            
           		var regexbirth = /^(19[0-9][0-9]|20\d{2})(0[0-9]|1[0-2])(0[1-9]|[1-2][0-9]|3[0-1])$/;
                if(!regexbirth.test(params.birth) || !isNotEmpty(params.birth)){
                	alert("생년월일을 다시 입력해주세요.");
                	return;
                }
                var regexphone = /^\d{10,11}$/;
                if(!regexphone.test(params.phone) || !isNotEmpty(phone_valid)){
                	alert("휴대폰 번호를 다시 입력해주세요.");
                	return;
                } 
            	if(!jQuery("#agreeEssential").is(":checked")){
                    alert("제 3자 정보 이용 약관을 동의하셔야 합니다.");
                    jQuery("#agreeEssential").focus();
            	}else{
                	 params.agree = "Y";
                	 document.auth.btn_auth.disabled = true;
                	 document.getElementById('btn_auth').innerText = "요청 중";
             	     getRequest('svc/pass/notice', params);             
                 }     
            }
        });
    });    
	function isNotEmpty(obj) {
	    if(typeof obj == "undefined" || obj == "" || obj == null) {
	        return false;
	    } else{
	        return true;
	    }
	}
   function getRequest(url, data) {
       $.ajax({
            url: "/" + url + "",
            type: "POST",
            data: data,
            dataType: "json",
            success: function (data) {
                /* 
                	3xxx - 인증 알림내용 등록 에러
                	4xxx - 검증 요청 에러
                */
                if(data.errorCd == 0){
                	document.auth.cert.value = data.certTxId;
                	document.auth.req.value = data.reqTxId;
                	document.auth.action = "/svc/pass/auth";
                    document.auth.submit();
                }else if(data.errorCd == 3101){
                   	document.auth.btn_auth.disabled = false;
                	document.getElementById('btn_auth').innerText = "인증 요청";                    
                    alert('이름 또는 휴대폰 번호가 입력되지 않았습니다.\n입력한 내용을 다시 확인 후 이용해주세요.(3101)\n인증서 사용방법이 궁금하시면, 여기(www.passauth.co.kr) 를 방문해주세요.\n문의사항은 고객센터(1800-4273)로 연락해주세요.');
                }else if(data.errorCd == 3102){
                  	document.auth.btn_auth.disabled = false;
                	document.getElementById('btn_auth').innerText = "인증 요청";                    
                    alert('이름 또는 휴대폰 번호가 입력되지 않았습니다.\n입력한 내용을 다시 확인 후 이용해주세요.(3102)\n인증서 사용방법이 궁금하시면, 여기(www.passauth.co.kr) 를 방문해주세요.\n문의사항은 고객센터(1800-4273)로 연락해주세요.');
                }else if(data.errorCd == 3103){
                 	document.auth.btn_auth.disabled = false;
                	document.getElementById('btn_auth').innerText = "인증 요청";                    
                	alert('PASS인증서가 발급되지 않아 이용하실 수 없습니다.\nPASS인증서로 인증하기 위해서는 PASS 앱을 통해 인증서를 발급받으신 후 다시 인증요청을 진행하시거나, 인증서 발급이 어려우신 경우 "휴대폰 본인인증"을 이용하여 사전예약을 신청하실 수 있습니다.(3103)\n(PASS앱 > 인증서 관리 > 인증서 발급)\n인증서 발급방법이 궁금하시면, 여기(www.passauth.co.kr)를 방문해주세요.\n문의사항은 고객센터(1800-4273 또는 통신사 114)로 연락해주세요.')
                }else if(data.errorCd == 3104){
                	document.auth.btn_auth.disabled = false;
               	 	document.getElementById('btn_auth').innerText = "인증 요청";                    
                    alert('PASS앱이 설치되지 않았습니다.\n앱을 설치하고 다시 이용해주세요.(3104)\n인증서 발급방법이 궁금하시면, 여기(www.passauth.co.kr) 를 방문해주세요.\n문의사항은 고객센터(1800-4273 또는 통신사 114)로 연락해주세요. ');
                }else if(data.errorCd == 3105){
                	document.auth.errorType.value = "pass-3105-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else if(data.errorCd == 3106){
                   	document.auth.btn_auth.disabled = false;
                	document.getElementById('btn_auth').innerText = "인증 요청";
                    alert('PASS 앱 가입정보(or 회원정보)가 확인되지 않습니다.\n입력한 내용을 다시 확인 후 이용해주세요.(3106)\n문의사항은 가입한 통신사 고객센터(114)에 문의해주세요.');
                }else if(data.errorCd == 3107){
                	document.auth.errorType.value = "pass-3107-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else if(data.errorCd == 3199){
	               	document.auth.errorType.value = "pass-3199-error";
	                document.auth.action = "/svc/common/error";
	                document.auth.submit();
                }else if(data.errorCd == 9000){
                	document.auth.errorType.value = "pass-9000-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else if(data.errorCd == 9001){
                	document.auth.errorType.value = "pass-9001-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else if(data.errorCd == 9002){
                	document.auth.errorType.value = "pass-9002-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else if(data.errorCd == 9003){
                	document.auth.errorType.value = "pass-9003-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else if(data.errorCd == 9099){
                	document.auth.errorType.value = "pass-9099-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }else{
                	document.auth.errorType.value = "cert-server-error";
                    document.auth.action = "/svc/common/error";
                    document.auth.submit();
                }
            },
            error: function (e) {
                document.auth.errorType.value = "cert-server-error";
                document.auth.action = "/svc/common/error";
                document.auth.submit();
            }
        });
   }
</script>
